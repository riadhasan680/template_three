{{ define "main" }}
<div class="bg-white min-h-screen font-heading">
    <!-- Progress Bar -->
    <div class="fixed top-0 left-0 h-1 bg-red-600 z-[100]" id="scroll-progress" style="width: 0%"></div>

    <div class="max-w-[1280px] mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12">
            
            <!-- Main Content Column -->
            <article class="lg:col-span-8">
                <!-- Breadcrumb -->
                <nav class="flex items-center gap-2 text-xs md:text-sm text-gray-500 mb-6 uppercase tracking-wide font-medium">
                    <a href="/" class="hover:text-red-600 transition-colors">Home</a>
                    <iconify-icon icon="mdi:chevron-right"></iconify-icon>
                    <a href="/{{ .Section }}" class="hover:text-red-600 transition-colors">{{ .Section | humanize }}</a>
                    <iconify-icon icon="mdi:chevron-right"></iconify-icon>
                    <span class="text-gray-900 truncate max-w-[200px]">{{ .Title }}</span>
                </nav>

                <!-- Article Header -->
                <header class="mb-8 md:mb-10">
                    <div class="mb-4">
                        <span class="bg-red-600 text-white px-3 py-1 text-xs font-bold uppercase rounded-sm inline-block">
                            {{ index .Params.categories 0 | default "Article" }}
                        </span>
                    </div>
                    
                    <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 leading-tight mb-6">
                        {{ .Title }}
                    </h1>

                    <div class="flex flex-col sm:flex-row sm:items-center justify-between py-4 border-y border-gray-100 gap-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gray-100 overflow-hidden ring-2 ring-gray-50">
                                <img src="https://ui-avatars.com/api/?name=Admin&background=random" alt="Admin" class="w-full h-full object-cover">
                            </div>
                            <div class="flex flex-col">
                                <span class="text-sm font-bold text-gray-900 uppercase tracking-tight">By {{ .Params.author | default "Admin" }}</span>
                                <span class="text-xs text-gray-500 font-medium flex items-center gap-1">
                                    <iconify-icon icon="mdi:clock-outline"></iconify-icon>
                                    {{ .Date.Format "January 02, 2006" }}
                                </span>
                            </div>
                        </div>

                        <!-- Social Share -->
                        <div class="flex items-center gap-2">
                            <span class="text-xs font-bold text-gray-400 uppercase mr-2 hidden sm:block">Share:</span>
                            <a href="#" class="w-8 h-8 rounded-full bg-[#1877F2] text-white flex items-center justify-center hover:scale-110 transition-transform shadow-sm">
                                <iconify-icon icon="mdi:facebook" class="text-sm"></iconify-icon>
                            </a>
                            <a href="#" class="w-8 h-8 rounded-full bg-[#1DA1F2] text-white flex items-center justify-center hover:scale-110 transition-transform shadow-sm">
                                <iconify-icon icon="mdi:twitter" class="text-sm"></iconify-icon>
                            </a>
                            <a href="#" class="w-8 h-8 rounded-full bg-[#25D366] text-white flex items-center justify-center hover:scale-110 transition-transform shadow-sm">
                                <iconify-icon icon="mdi:whatsapp" class="text-sm"></iconify-icon>
                            </a>
                            <button onclick="window.print()" class="w-8 h-8 rounded-full bg-gray-800 text-white flex items-center justify-center hover:scale-110 transition-transform shadow-sm">
                                <iconify-icon icon="mdi:printer" class="text-sm"></iconify-icon>
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Featured Image -->
                {{ if .Params.image }}
                <div class="mb-10 rounded-sm overflow-hidden shadow-sm relative group">
                    <img src="{{ .Params.image }}" alt="{{ .Title }}" class="w-full h-auto object-cover max-h-[500px]">
                    <div class="absolute inset-0 ring-1 ring-black/5 rounded-sm"></div>
                </div>
                {{ end }}

                <!-- Article Body -->
                <div class="prose prose-lg max-w-none 
                    prose-headings:font-heading prose-headings:font-bold prose-headings:text-gray-900 
                    prose-p:text-gray-700 prose-p:leading-relaxed
                    prose-a:text-red-600 prose-a:no-underline hover:prose-a:underline
                    prose-img:rounded-sm prose-img:shadow-sm
                    prose-blockquote:border-l-4 prose-blockquote:border-red-600 prose-blockquote:bg-gray-50 prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:not-italic
                    mb-12">
                    {{ .Content }}
                </div>

                <!-- Tags -->
                {{ with .Params.tags }}
                <div class="flex flex-wrap gap-2 mb-12">
                    {{ range . }}
                    <a href="/tags/{{ . | urlize }}" class="px-3 py-1 bg-gray-100 text-gray-600 text-sm font-medium rounded-sm hover:bg-red-600 hover:text-white transition-colors uppercase tracking-wide">
                        #{{ . }}
                    </a>
                    {{ end }}
                </div>
                {{ end }}

                <!-- Related Posts -->
                <div class="border-t border-gray-200 pt-10 mt-10">
                    <div class="flex items-center gap-2 mb-6">
                        <span class="bg-red-600 w-2 h-6 block"></span>
                        <h3 class="text-xl font-bold text-gray-900 uppercase">You May Also Like</h3>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        {{ $related := first 3 (where .Site.RegularPages "Section" .Section) }}
                        {{ range $related }}
                        <a href="{{ .Permalink }}" class="group block">
                            <div class="aspect-video bg-gray-100 rounded-sm overflow-hidden mb-3">
                                <img src="{{ if .Params.image }}{{ .Params.image }}{{ else }}https://placehold.co/400x300{{ end }}" 
                                     class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" 
                                     alt="{{ .Title }}">
                            </div>
                            <h4 class="font-bold text-gray-900 text-sm leading-tight group-hover:text-red-600 transition-colors line-clamp-2">
                                {{ .Title }}
                            </h4>
                        </a>
                        {{ end }}
                    </div>
                </div>

            </article>

            <!-- Sidebar -->
            <aside class="lg:col-span-4 pl-0 lg:pl-8 border-l-0 lg:border-l border-gray-100">
                <div class="sticky top-24">
                    {{ partial "index/sidebar.html" . }}
                </div>
            </aside>
        </div>
    </div>
</div>

<script>
    // Scroll Progress Bar
    window.onscroll = function() {
        var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        var scrolled = (winScroll / height) * 100;
        document.getElementById("scroll-progress").style.width = scrolled + "%";
    };
</script>
{{ end }}
